#include <iostream>
#include <string>
#include <vector>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

using namespace std;
int main(int argc, const char *argv[])
{
    char buf[1024] = " ";
    FILE *fpIn;//fpOut;
    
    if(argc == 2){
        perror("wrong args");
    }

    fpIn = popen("ls -la", "r");
    FILE *fpOut = fopen("test.txt", "w");

    fread(buf, sizeof(char), sizeof buf, fpIn);
    fwrite(buf, 1, sizeof buf, fpOut);

    pclose(fpIn);
    fclose(fpOut);
    return 0;
}
